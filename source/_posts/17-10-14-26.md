---
title: 前端自动化工具
date: 2017-10-17 23:00:33
tags: [知识碎片]
---
在这段时间工作的时候，遇到了很多以前没有接触过的名词，比如fekit，Webpack之类的，也用小黑框输入了很多指令，但是对于它们都做了些什么还不太清楚。

## 前端自动化工具都做了什么

前端自动化工具有很多，其中如Grunt，Gulp，Webpack什么的各种常见，当然还有很多其他的各种不明意义的词。它们到底做了些什么呢？

作为开发工具，其实它们本质上做的事可以分为：
* 帮你安装东西
* 帮你做事

再将两个事拓展一下，可以大致为：
* 拷贝安装CSS库、JS库
* 为你的开发环境安装服务器
* 安装测试库、其他的开发工具等
* 在一个文件中替换文本字符串
* 创建文件夹，并且将文件转移到这些文件夹中
* 用一条单命令运行单元测试
* 在我保存文件的时候刷新浏览器
* 所有JavaScript文件整合为一个文件，将所有CSS文件整合为一个文件
* 对所有JavaScript和CSS进行简化处理（去除注释换行符等）
* 在html页面中修改`<script>`标签的位置

## 开发环节中遇到的事情

### 调试服务器

页面操作离不开各种请求，要处理请求就必须要开启一个web服务器。web服务器处理的工作有：
* 建立TCP链接
* 处理客户端发送的HTTP请求
* 向客户端发送处理过后的结果
* 关闭链接

常用web服务器有：tomcat、Apache、Nginx等。但这部分搭建在我理解里应该是属于后端处理的内容。在**前后端不分离**的情况下，开发模式应该会这样：前端实现页面，但遇到ajax请求的时候，调试只能等待后端完成这部分模块完成后才能看到效果，这就十分的影响工作效率了。

在大公司中都在强调前后端分离的思想，前后端分离是怎样工作的呢？
* 前端的工作：实现整一个前端页面以及交互逻辑，以及利用ajax与Nodejs服务器（中间层）交互
* 后端的工作：提供API接口，利用redis来管理session,与数据库交互

**Nodejs前端服务器的职责：**
* 作为静态文件服务器，当用户访问网站的时候，将index.html以及其引入的js、css、fonts以及图片返回给用户
* 负责将客户端发来的ajax请求转发给后台服务器

这种分离的方式可以大致体现在：
* 前端依赖指定格式的mock数据来进行UI开发
* 前端的开发和测试都基于这些mock数据
* 后端产生指定格式的mock数据
* 后端需要测试来确保生成的mock数据正是前端需要的

### 调试自动更新

在调试网页的时候，如果修改一点代码，想要在浏览器查看效果，就得按f5刷新，如此反复势必造成许多的时间浪费。所以自动化工具会带有帮你检测本地文件的修改然后实时刷新页面的功能。

### 解决浏览器缓存

由于浏览器会缓存已经加载过的文件，来提高网页响应的速度，但是在开发中，我们想看到的是我们保存的最新的文件的效果，所以要让浏览器不缓存我们的代码文件（通过文件名末尾增加哈希值来保证文件是最新的）。

### 其他代码格式

最常见的是css预处理器，如LESS、SASS和Stylus之类的。它们需要通过编译成CSS文件在浏览器中展现出效果，而这些编译的工作自然也是交给前端自动化工具实现。

### 模块化

在工作中有许多复杂的交互，可能需要你组织非常复杂的代码功能。前端自动化工具的使用也有利于我们模块的划分。

### 资源合并优化

当完成开发阶段的时候，我们需要提交自己开发的代码到线上服务器，在提交之前我们需要考虑将开发的资源进行最优化。为了减少http请求的次数，我们需要将分开写的js根据依赖关系去合并成较少的文件数目，并且进行压缩。类似的还有CSS文件和图片文件的压缩等等。

