<!DOCTYPE html><html lang="zh-Ch"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title> 从零开始的backbone.js（一） · Yx1aoq1's Blog</title><meta name="description" content="从零开始的backbone.js（一） - Yx1aoq1"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="icon" href="/favicon.png"><link rel="stylesheet" href="/css/apollo.css"><link rel="search" type="application/opensearchdescription+xml" href="http://yoursite.com/atom.xml" title="Yx1aoq1's Blog"></head><body><div class="wrap"><header><a href="/" class="logo-link"><img src="/favicon.png" alt="logo"></a><ul class="nav nav-list"><li class="nav-list-item"><a href="/" target="_self" class="nav-list-link">BLOG</a></li><li class="nav-list-item"><a href="/archives/" target="_self" class="nav-list-link">ARCHIVE</a></li><li class="nav-list-item"><a href="http://weibo.com/4shero" target="_blank" class="nav-list-link">WEIBO</a></li><li class="nav-list-item"><a href="https://github.com/Yx1aoq1" target="_blank" class="nav-list-link">GITHUB</a></li><li class="nav-list-item"><a href="/" target="_self" class="nav-list-link">RSS</a></li></ul></header><main class="container"><div class="post"><article class="post-block"><h1 class="post-title">从零开始的backbone.js（一）</h1><div class="post-info">Mar 28, 2017</div><div class="post-content"><p>实习项目用的框架：backbone.js</p>
<blockquote>
<p>Backbone.js为复杂WEB应用程序提供<strong>模型(models)</strong>、<strong>集合(collections)</strong>、<strong>视图(views)</strong>的结构。</p>
</blockquote>
<a id="more"></a>
<h2 id="Backbone-Model（模型）"><a href="#Backbone-Model（模型）" class="headerlink" title="Backbone.Model（模型）"></a>Backbone.Model（模型）</h2><ul>
<li><p>Model的作用：对业务中实体对象的抽象，把数据以文件、数据库的形式存储在磁盘上，与服务器端进行数据交互。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//相当于public class ...</span></div><div class="line"><span class="comment">//可以存放基本的数值以及方法</span></div><div class="line"><span class="keyword">var</span> Man = Backbone.Model.extend(&#123;</div><div class="line">	<span class="comment">//模型在服务器上位置的url</span></div><div class="line">	<span class="comment">//调用save方法时会post对象的所有属性到server端，数据形式是json</span></div><div class="line">	url: <span class="string">'/man/'</span>,</div><div class="line">	<span class="comment">//定义了一个Model，实现了初始化方法（initialize函数）</span></div><div class="line">	initialize: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">		alert(<span class="string">'Hey,you create me!'</span>);</div><div class="line">		<span class="comment">//jQuery.bind(),对jQuery对象进行事件绑定，可绑定一个或者多个</span></div><div class="line">		<span class="comment">//当name发生改变时触发该函数</span></div><div class="line">		<span class="keyword">this</span>.bind(<span class="string">"change:name"</span>,<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">			<span class="keyword">var</span> name = <span class="keyword">this</span>.get(<span class="string">"name"</span>);</div><div class="line">			alert(<span class="string">"you change the name:"</span> + name);</div><div class="line">		&#125;);</div><div class="line">		<span class="keyword">this</span>.bind(<span class="string">"invalid"</span>,<span class="function"><span class="keyword">function</span>(<span class="params">model,error</span>)</span>&#123;</div><div class="line">			alert(error);</div><div class="line">			<span class="comment">//error是来自validate校验的错误</span></div><div class="line">		&#125;)</div><div class="line">	&#125;,</div><div class="line">	<span class="comment">//定义默认值（属性）name &amp; age</span></div><div class="line">	defaults: &#123;</div><div class="line">		<span class="attr">name</span>: <span class="string">'tom'</span>,</div><div class="line">		<span class="attr">age</span>: <span class="string">'18'</span></div><div class="line">	&#125;,</div><div class="line">	<span class="comment">//Model.validate(attributes, options)，默认为未定义</span></div><div class="line">	<span class="comment">//默认在save之前调用，如果&#123;validate:true&#125;，则也能在set之前调用</span></div><div class="line">	<span class="comment">//当校验失败时，会触发"invalid"事件</span></div><div class="line">	validate: <span class="function"><span class="keyword">function</span>(<span class="params">attributes</span>) </span>&#123;</div><div class="line">		<span class="keyword">if</span>(attributes.name == <span class="string">''</span>) <span class="keyword">return</span> <span class="string">"name不能为空"</span>;</div><div class="line">	&#125;,</div><div class="line">	<span class="comment">//定义了名为aboutMe的一个方法（函数）</span></div><div class="line">	aboutMe: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">		<span class="keyword">return</span> <span class="string">"I'm"</span> + <span class="keyword">this</span>.get(<span class="string">'name'</span>) + <span class="string">","</span> + <span class="keyword">this</span>.get(<span class="string">'age'</span>) </div><div class="line">		+ <span class="string">"years old."</span>;</div><div class="line">	&#125;</div><div class="line">&#125;);</div><div class="line"><span class="comment">//实例化Model，并会直接调用initialize函数</span></div><div class="line"><span class="keyword">var</span> man = <span class="keyword">new</span> Man;</div><div class="line"><span class="comment">//Model.set(attribute),用来给Model修改或设置属性</span></div><div class="line"><span class="comment">//改变了name的值，可以触发change事件，alert</span></div><div class="line">man.set(&#123;<span class="attr">name</span> : <span class="string">'jane'</span>&#125;);</div><div class="line"><span class="comment">//设置时并不会触发校验</span></div><div class="line">man.set(&#123;<span class="attr">name</span> : <span class="string">''</span>&#125;);</div><div class="line"><span class="comment">//model.save(attributes, options)，保存模型到数据库</span></div><div class="line"><span class="comment">//如果验证成功，返回jqXHR，否则false</span></div><div class="line"><span class="comment">//触发校验，根据验证规则弹出错误提示。</span></div><div class="line">man.save();</div><div class="line"><span class="comment">//从服务器端获取数据</span></div><div class="line"><span class="keyword">var</span> man1 = <span class="keyword">new</span> Man;</div><div class="line"><span class="comment">//第一种情况，他会发送get请求到model.url中，在服务器端判断来进行操作</span></div><div class="line">man1.fetch();</div><div class="line"><span class="comment">//第二种情况，他会发送get请求到/getmans/这个url种，然后返回json</span></div><div class="line">man1.fetch(&#123;<span class="attr">url</span> : <span class="string">'/man/'</span>&#125;);</div><div class="line"><span class="comment">//在服务器端返回数据的方法：</span></div><div class="line">man1.fetch(&#123;<span class="attr">url</span>:<span class="string">'/man/'</span>,<span class="attr">success</span>:<span class="function"><span class="keyword">function</span>(<span class="params">model,response</span>) </span>&#123;</div><div class="line">		<span class="comment">//model为获取到的数据</span></div><div class="line">		alert(<span class="string">'success'</span>);</div><div class="line">		alert(model.get(<span class="string">'name'</span>));</div><div class="line">	&#125;,<span class="attr">error</span>:<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">		<span class="comment">//当返回格式不正确或不是json数据时，会执行此方法</span></div><div class="line">		alert(<span class="string">'error'</span>);</div><div class="line">	&#125;</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
</li>
<li><p><strong>tip：</strong> 关于<code>$(selector).bind(event,data,function)</code><br>event：必填项，可以添加一个或多个，用空格隔开。<br>data：可以填可以不填，用来传递额外的数据<br>function：必填项，事件发生时运行的函数<br><a href="http://www.w3school.com.cn/jquery/jquery_ref_events.asp" target="_blank" rel="external">关于jQuery的事件方法</a></p>
</li>
</ul>
</div></article></div></main><footer><div class="paginator"><a href="/2017/03/29/17-03-29-9/" class="prev">上一篇</a><a href="/2017/03/26/17-03-26-7/" class="next">下一篇</a></div><div class="copyright"><p>© 2015 - 2017 <a href="http://yoursite.com">Yx1aoq1</a>, powered by <a href="https://hexo.io/" target="_blank">Hexo</a> and <a href="https://github.com/pinggod/hexo-theme-apollo" target="_blank">hexo-theme-apollo</a>.</p></div></footer></div><script async src="//cdn.bootcss.com/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML" integrity="sha384-crwIf/BuaWM9rM65iM+dWFldgQ1Un8jWZMuh3puxb8TOY9+linwLoI7ZHZT+aekW" crossorigin="anonymous"></script><script>(function(b,o,i,l,e,r){b.GoogleAnalyticsObject=l;b[l]||(b[l]=function(){(b[l].q=b[l].q||[]).push(arguments)});b[l].l=+new Date;e=o.createElement(i);r=o.getElementsByTagName(i)[0];e.src='//www.google-analytics.com/analytics.js';r.parentNode.insertBefore(e,r)}(window,document,'script','ga'));ga('create',"UA-65933410-1",'auto');ga('send','pageview');</script></body></html>