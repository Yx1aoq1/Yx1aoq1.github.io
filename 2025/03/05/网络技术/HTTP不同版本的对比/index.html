<!DOCTYPE html>
<html lang="en">
  <head>
  <!-- so meta -->
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="HandheldFriendly" content="True">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
  <!-- title -->
  <title>HTTP不同版本的对比</title>
  <!-- styles -->
  
<link rel="stylesheet" href="/css/style.css">

<meta name="generator" content="Hexo 4.2.1"></head>
  <body style="background-color: #2d2d2d">
    
      <div class="header-post">
  <a id="menu-icon" href="#"><i class="fas fa-bars fa-lg"></i></a>
  <div class="toc-wrap">
    <ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#什么是-HTTP"><span class="toc-number">1.</span> <span class="toc-text">什么是 HTTP?</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#HTTP-1-x"><span class="toc-number">2.</span> <span class="toc-text">HTTP&#x2F;1.x</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#HTTP-2"><span class="toc-number">3.</span> <span class="toc-text">HTTP&#x2F;2</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#HTTP-3"><span class="toc-number">4.</span> <span class="toc-text">HTTP&#x2F;3</span></a></li></ol>
  </div>
</div>

    
    <div class="layout-content">
      <header class="layout-header">
  <nav class="header-top">
    <ul class="menu">
       
        <li class="menu-item ">
          <a href="/">Home</a>
        </li>
       
        <li class="menu-item ">
          <a href="/archives">Writing</a>
        </li>
       
        <li class="menu-item ">
          <a href="/categories">Category</a>
        </li>
       
        <li class="menu-item ">
          <a href="/about">About</a>
        </li>
      
    </ul>
  </nav>
  
  
    <div class="content">
      <div class="post-header">
        <div class="pic">
          <img src="/images/avatar.jpg" />
        </div>
        <div class="info">
          <div class="title">HTTP不同版本的对比</div>
          <div class="post-meta">
            <div class="author" itemprop="author" itemscope itemtype="http://schema.org/Person">
              <span itemprop="name">Yx1aoq1</span>
            </div>
            
  <div class="meta">
    
      <time datetime="2025-03-05T09:20:35.000Z" itemprop="datePublished">2025-03-05</time>
      
    
  </div>

            
	<div class="article-category">
		<i class="fas fa-archive"></i>
		<a class="category-link" href="/categories/%E7%BD%91%E7%BB%9C%E6%8A%80%E6%9C%AF/">网络技术</a>
	</div>


            
	<div class="article-tag">
		<i class="fas fa-tag"></i>
		<a class="tag-link" href="/tags/HTTP-1/" rel="tag">HTTP/1</a>, <a class="tag-link" href="/tags/HTTP-2/" rel="tag">HTTP/2</a>, <a class="tag-link" href="/tags/HTTP-3/" rel="tag">HTTP/3</a>
	</div>


          </div>
        </div>
      </div>
    </div>
  
</header>
      <main class="layout-main">
        <article class="content">
  <h3 id="什么是-HTTP"><a href="#什么是-HTTP" class="headerlink" title="什么是 HTTP?"></a><strong>什么是 HTTP?</strong></h3><p>HTTP（超文本传输协议）是万维网（注意区分「万维网」和「互联网」）中数据传输的规则。它有三个主要版本，我们将逐一解析。</p>
<p>简单来说，HTTP 协议定义了浏览器如何与服务器通信以交换数据。所有版本的核心逻辑都是：浏览器发送「请求」，服务器返回「响应」。随着时间推移，协议变得越来越复杂，而理解这些改进对开发者至关重要。</p>
<h3 id="HTTP-1-x"><a href="#HTTP-1-x" class="headerlink" title="HTTP/1.x"></a>HTTP/1.x</h3><p>HTTP/1.0 于 1996 年发布，HTTP/1.1 于 1999 年推出并迅速普及。</p>
<p><strong>工作原理示例</strong>：</p>
<ol>
<li><p>用户访问 <code>accreditly.io</code>（以某网站为例），浏览器发送请求：</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">GET accreditly.io</span><br></pre></td></tr></table></figure>
</li>
<li><p>服务器响应 HTML 文档：</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">200 OK</span><br><span class="line">&lt;html&gt;...&lt;/html&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p>浏览器解析文档并依次请求其中的资源（图片/CSS/JS）。</p>
</li>
</ol>
<p><strong>HTTP/1.x 的核心问题</strong>：</p>
<ol>
<li><p><strong>队头阻塞（Head-of-line blocking）</strong>：</p>
<p>每个连接只能处理一个请求，后续请求必须排队等待。</p>
</li>
<li><p><strong>无优先级控制</strong>：</p>
<p>无法指定资源加载优先级，次要资源可能阻塞关键内容。</p>
</li>
<li><p><strong>文本协议开销大</strong>：</p>
<p>尤其在使用 Cookie 时，头部信息冗余严重。</p>
</li>
</ol>
<p>这些问题对现代网页性能影响显著。而对于以上这些问题，也存在着以下一些解决方案：</p>
<ol>
<li><p><strong>域名分片</strong></p>
<figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Nginx 配置示例（多个子域名指向同一服务）</span></span><br><span class="line"><span class="section">server</span> &#123;</span><br><span class="line">    <span class="attribute">listen</span> <span class="number">80</span>;</span><br><span class="line">    <span class="attribute">server_name</span> static1.example.com static2.example.com static3.example.com;</span><br><span class="line">    <span class="attribute">root</span> /var/www/static;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>前端资源引用：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 分散到不同子域名 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"https://static1.example.com/logo.png"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"https://static2.example.com/app.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">href</span>=<span class="string">"https://static3.example.com/style.css"</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>资源合并</strong></p>
<p>例如使用 webpack 等工具将多个小文件合并为一个大的文件，如 <code>vendors.js</code> 和 <code>styles.css</code>；使用精灵图合并图片。</p>
</li>
<li><p><strong>内联</strong></p>
<p>将高优先级资源或小资源通过script标签或style标签或dataUrl的形式直接内嵌在页面里。</p>
</li>
<li><p><strong>Gzip压缩</strong></p>
</li>
<li><p><strong>缓存策略</strong></p>
</li>
<li><p><strong>CDN加速</strong></p>
</li>
</ol>
<h3 id="HTTP-2"><a href="#HTTP-2" class="headerlink" title="HTTP/2"></a>HTTP/2</h3><p>2015 年发布的 HTTP/2 旨在解决上述问题。现代网页体积庞大，但网络速度的改进远不及资源需求的增长。</p>
<p><strong>HTTP/2 的杀手锏</strong>：</p>
<ol>
<li><p><strong>多路复用（Multiplexing）</strong>：<br>浏览器通过单个连接并行请求所有资源，服务器同时响应。<br><img src="https://images-1300309047.cos.ap-chengdu.myqcloud.com/blog/http2.png?imageSlim" alt=""></p>
</li>
<li><p><strong>其他优化</strong>：</p>
<ul>
<li><strong>头部压缩</strong>：使用 HPACK 算法减少头部体积。</li>
<li><strong>服务器推送（Server Push）</strong>：主动推送资源到客户端缓存。</li>
<li><strong>流优先级（Stream Prioritization）</strong>：允许优先加载关键资源。</li>
<li><strong>二进制分帧（Binary Framing）</strong>：协议更高效且抗干扰。</li>
</ul>
</li>
</ol>
<p><strong>局限</strong>：仍基于 TCP 协议，存在 TCP 的固有缺陷（如高延迟网络下的性能问题）。</p>
<p>那么针对HTTP/1.x的前端优化还应该继续使用吗？答案是以下几种方式可以废弃了：</p>
<ul>
<li><p><strong>域名分片</strong>：HTTP/2 的多路复用特性允许通过单个连接并行传输多个资源，而 HTTP/1.x 的分片会强制建立多个 TCP 连接，可能反而降低性能。</p>
</li>
<li><p><strong>资源合并</strong>：HTTP/1.x 中合并 CSS/JS 文件以减少请求次数，但 HTTP/2 中多个小文件可以并行加载，合并大文件可能导致缓存失效成本增加。</p>
</li>
<li><p><strong>精灵图</strong>：HTTP/2 的多路复用解决了图片并发请求限制，精灵图会增加维护成本。</p>
</li>
</ul>
<h3 id="HTTP-3"><a href="#HTTP-3" class="headerlink" title="HTTP/3"></a>HTTP/3</h3><p>HTTP/3 抛弃 TCP，改用基于 UDP 的 <strong>QUIC 协议</strong>（Quick UDP Internet Connections）。</p>
<p><strong>QUIC 的核心优势</strong>：</p>
<ol>
<li><strong>内置加密</strong>：默认集成 TLS 1.3，减少握手延迟。</li>
<li><strong>消除队头阻塞</strong>：丢包仅影响单个流，而非整个连接。</li>
<li><strong>连接迁移</strong>：更换 IP 地址时保持连接（对移动设备友好）。</li>
<li><strong>0-RTT 连接</strong>：对已访问过的服务器可跳过握手。</li>
<li><strong>智能拥塞控制</strong>：动态适应网络变化。</li>
</ol>
<p><strong>挑战</strong>：</p>
<ul>
<li>网络基础设施对 UDP 的支持有限（许多网络屏蔽 UDP）。</li>
<li>浏览器兼容性参差不齐。</li>
</ul>

</article>
<div class="prev-or-next">
  <div class="post-foot-next">
    
      <a href="/2025/03/05/%E9%9D%A2%E7%BB%8F/%E8%BD%AF%E9%80%9A%E5%A4%96%E5%8C%85%E9%9D%A2%E8%AF%95%E6%80%BB%E7%BB%93/" target="_self">
        <i class="fas fa-angle-left"></i>
        <span>Previous post</span>
      </a>
    
  </div>
  <div class="post-foot-prev">
    
  </div>
</div>
      </main>
      <footer class="layout-footer">
  <div>
    Copyright &copy;
    
    
    2025
    Yx1aoq1
  </div>
</footer>
    </div>
    <!-- styles -->
<link rel="preconnect" href="https://fonts.gstatic.com">
<link href="https://fonts.googleapis.com/css2?family=Roboto+Mono&display=swap" rel="stylesheet">

<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

    <!-- jquery -->

<script src="/lib/jquery/jquery.min.js"></script>


<script src="/js/accordion-menu.js"></script>

  </body>
</html>
